<!DOCTYPE html>
<html lang="en">

  <head>
      <title>Week-4 Assignment-2</title>
      <link rel="stylesheet" href="stylesheets/style.css">
      <script>

        function ajax(src, callback){
          var xhr = new XMLHttpRequest();
          xhr.onreadystatechange = function () {
            if (xhr.readyState === 4) {
              var userInfo = JSON.parse(xhr.responseText);
              callback(userInfo);
            }
          };
          xhr.open('GET', src);
          xhr.send();
        }

        function render(data){
          // var content = "";
          var contents = document.getElementById("ajax");
          for (var i = 0; i < data.length; i++) {

            var partDiv = document.createElement("div");
            partDiv.className = "part";

            var name = document.createElement("h3");
            var price = document.createElement("p");
            var description = document.createElement("p");

            name.innerHTML = `Name: ${data[i].name}`;
            price.innerHTML = `$ ${data[i].price}`;
            description.innerHTML = `${data[i].description}`;

            partDiv.appendChild(name);
            partDiv.appendChild(price);
            partDiv.appendChild(description);

            contents.appendChild(partDiv);
          }
        }

        ajax("https://cwpeng.github.io/live-records-samples/data/products.json", function(response){render(response);});

      </script>
  </head>

  <body>
    <div class="container">
      <div class="heading">
        <h1>Week-4 Assignment-2</h1>
        <p>Callback Function and Advanced HTML DOM</p>
        <h2>來看看澎澎老師給的網址裡有什麼東西</h2>
        <div id="ajax">

        </div>
      </div>
    </div>
  </body>

</html>
